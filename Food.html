<!DOCTYPE html>
<html>
<head>
  <title>Dog Food Tracker</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 10px;
      max-width: 600px;
      margin: auto;
    }
    .box {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
    }
    textarea {
      width: 100%;
      height: 60px;
      resize: vertical;
    }
    .radio-group {
      display: flex;
      flex-direction: column;
      margin-bottom: 10px;
    }
    .buttons-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 10px;
    }
    button {
      padding: 6px 10px;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
    }
    #saveBtn {
      background-color: green;
      color: white;
      border: none;
      width: 100%;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <h1>Dog Food Tracker</h1>

  <div class="box">
    <h2>Dog Groups</h2>
    <label>Old Males</label>
    <textarea id="oldMales"></textarea>

    <label>Old Females</label>
    <textarea id="oldFemales"></textarea>

    <label>Young Males</label>
    <textarea id="youngMales"></textarea>

    <label>Young Females</label>
    <textarea id="youngFemales"></textarea>
  </div>

  <div class="box">
    <h2>Assign Dogs to Cup Sizes</h2>

    <div class="radio-group">
      <label><input type="radio" name="group" value="oldMales"> Old Males</label>
      <label><input type="radio" name="group" value="oldFemales"> Old Females</label>
      <label><input type="radio" name="group" value="youngMales"> Young Males</label>
      <label><input type="radio" name="group" value="youngFemales"> Young Females</label>
    </div>

    <textarea id="dogList" readonly></textarea>

    <div class="buttons-group">
      <button onclick="assignCup(2)">2</button>
      <button onclick="assignCup(3)">3</button>
      <button onclick="assignCup(4)">4</button>
      <button onclick="moveBack()">‚Üê</button>
    </div>

    <label>2 Cups</label>
    <textarea id="cup2"></textarea>

    <label>3 Cups</label>
    <textarea id="cup3"></textarea>

    <label>4 Cups</label>
    <textarea id="cup4"></textarea>

    <button id="saveBtn" onclick="saveToFirebase()">üíæ Save</button>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function saveToFirebase() {
      const groupData = {
        oldMales: document.getElementById('oldMales').value,
        oldFemales: document.getElementById('oldFemales').value,
        youngMales: document.getElementById('youngMales').value,
        youngFemales: document.getElementById('youngFemales').value
      };

      const cupData = {
        cup2: document.getElementById('cup2').value,
        cup3: document.getElementById('cup3').value,
        cup4: document.getElementById('cup4').value
      };

      db.collection("dogFood").doc("groups").set(groupData);
      db.collection("dogFood").doc("cups").set(cupData);

      alert("Saved!");
    }

    function loadDogGroup(groupName) {
      db.collection("dogFood").doc("groups").get().then(doc => {
        if (doc.exists) {
          const data = doc.data();
          const dogs = (data[groupName] || "").split("\n").map(d => d.trim()).filter(d => d);
          document.getElementById("dogList").value = dogs.join("\n");
        }
      });
    }

    document.querySelectorAll("input[name='group']").forEach(radio => {
      radio.addEventListener('change', (e) => {
        loadDogGroup(e.target.value);
      });
    });

    function assignCup(cup) {
      const selected = document.getElementById("dogList").value.split("\n")[0];
      if (!selected) return;

      document.getElementById(`cup${cup}`).value += selected + "\n";
      const lines = document.getElementById("dogList").value.split("\n").filter(l => l !== selected);
      document.getElementById("dogList").value = lines.join("\n");
    }

    function moveBack() {
      [2, 3, 4].forEach(cup => {
        const box = document.getElementById(`cup${cup}`);
        const lines = box.value.split("\n").filter(Boolean);
        if (lines.length > 0) {
          const name = lines.pop();
          document.getElementById("dogList").value += name + "\n";
          box.value = lines.join("\n");
        }
      });
    }

    window.onload = () => {
      db.collection("dogFood").doc("groups").get().then(doc => {
        if (doc.exists) {
          const data = doc.data();
          document.getElementById("oldMales").value = data.oldMales || "";
          document.getElementById("oldFemales").value = data.oldFemales || "";
          document.getElementById("youngMales").value = data.youngMales || "";
          document.getElementById("youngFemales").value = data.youngFemales || "";
        }
      });

      db.collection("dogFood").doc("cups").get().then(doc => {
        if (doc.exists) {
          const data = doc.data();
          document.getElementById("cup2").value = data.cup2 || "";
          document.getElementById("cup3").value = data.cup3 || "";
          document.getElementById("cup4").value = data.cup4 || "";
        }
      });
    };
  </script>
</body>
</html>
