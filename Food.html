<!DOCTYPE html>
<html>
<head>
  <title>Dog Food Tracker</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 10px;
      max-width: 600px;
      margin: auto;
    }

    h2 {
      margin-top: 20px;
    }

    .box {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
    }

    textarea {
      width: 100%;
      height: 60px;
      resize: vertical;
    }

    .cup-section {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      margin-top: 10px;
    }

    .cup-section textarea {
      height: 80px;
    }

    .radio-group {
      display: flex;
      flex-direction: column;
      margin-bottom: 10px;
    }

    .buttons-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 10px;
    }

    button {
      padding: 6px 10px;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
    }

    #saveBtn {
      background-color: green;
      color: white;
      border: none;
      width: 100%;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <h1>Dog Food Tracker</h1>

  <div class="box">
    <h2>Dog Groups</h2>
    <label>Old Males</label>
    <textarea id="oldMales"></textarea>

    <label>Old Females</label>
    <textarea id="oldFemales"></textarea>

    <label>Young Males</label>
    <textarea id="youngMales"></textarea>

    <label>Young Females</label>
    <textarea id="youngFemales"></textarea>
  </div>

  <div class="box">
    <h2>Assign Dogs to Cup Sizes</h2>

    <div class="radio-group">
      <label><input type="radio" name="group" value="oldMales"> Old Males</label>
      <label><input type="radio" name="group" value="oldFemales"> Old Females</label>
      <label><input type="radio" name="group" value="youngMales"> Young Males</label>
      <label><input type="radio" name="group" value="youngFemales"> Young Females</label>
    </div>

    <textarea id="dogList" readonly></textarea>

    <div class="buttons-group">
      <button onclick="assignCup(2)">2</button>
      <button onclick="assignCup(3)">3</button>
      <button onclick="assignCup(4)">4</button>
      <button onclick="moveBack()">‚Üê</button>
    </div>

    <label>2 Cups</label>
    <textarea id="cup2"></textarea>

    <label>3 Cups</label>
    <textarea id="cup3"></textarea>

    <label>4 Cups</label>
    <textarea id="cup4"></textarea>

    <button id="saveBtn" onclick="saveToFirebase()">üíæ Save</button>
  </div>

  <!-- Firebase setup (placeholder) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "YOUR_DB_URL",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_BUCKET",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const groupTextareas = {
      oldMales: document.getElementById('oldMales'),
      oldFemales: document.getElementById('oldFemales'),
      youngMales: document.getElementById('youngMales'),
      youngFemales: document.getElementById('youngFemales')
    };

    const dogList = document.getElementById('dogList');
    const cup2 = document.getElementById('cup2');
    const cup3 = document.getElementById('cup3');
    const cup4 = document.getElementById('cup4');

    document.querySelectorAll('input[name="group"]').forEach(radio => {
      radio.addEventListener('change', () => {
        const selected = radio.value;
        dogList.value = groupTextareas[selected].value.trim();
      });
    });

    function assignCup(size) {
      const lines = dogList.value.split('\n').filter(line => line.trim());
      const name = lines.shift();
      if (!name) return;

      if (size === 2) cup2.value += name + '\n';
      else if (size === 3) cup3.value += name + '\n';
      else if (size === 4) cup4.value += name + '\n';

      dogList.value = lines.join('\n');
      const selected = document.querySelector('input[name="group"]:checked')?.value;
      if (selected) groupTextareas[selected].value = dogList.value;
    }

    function moveBack() {
      const selected = document.querySelector('input[name="group"]:checked')?.value;
      if (!selected) return;

      const groupBox = groupTextareas[selected];
      let removed = '';

      [cup2, cup3, cup4].forEach(cup => {
        const lines = cup.value.split('\n').filter(l => l.trim());
        if (lines.length) {
          removed = lines.pop();
          cup.value = lines.join('\n');
        }
      });

      if (removed) {
        groupBox.value += (groupBox.value.trim() ? '\n' : '') + removed;
        dogList.value = groupBox.value;
      }
    }

    function saveToFirebase() {
      const data = {
        oldMales: groupTextareas.oldMales.value.trim(),
        oldFemales: groupTextareas.oldFemales.value.trim(),
        youngMales: groupTextareas.youngMales.value.trim(),
        youngFemales: groupTextareas.youngFemales.value.trim(),
        cup2: cup2.value.trim(),
        cup3: cup3.value.trim(),
        cup4: cup4.value.trim()
      };

      const date = new Date().toISOString().split('T')[0];
      db.ref('dogFood/' + date).set(data);
      alert('Saved to Firebase!');
    }
  </script>
</body>
</html>
